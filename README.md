# Семестровая работа №2: Игра "Рисуй и Угадывай"

Сетевое приложение с оконным интерфейсом на Java (Swing) для игры "Рисуй и Угадывай".

## Описание

Игра для двух игроков, где один рисует слово, а второй пытается его угадать. Игроки меняются ролями каждый раунд. Тот, кто угадывает слово, получает очко.

## Технологии

- **Java 11**
- **Swing** - графический интерфейс
- **Sockets** - сетевое взаимодействие
- **Multithreading** - многопоточность для разделения UI и сети
- **Maven** - управление зависимостями
- **Gson** - сохранение статистики в JSON

## Требования

- Java 11 или выше
- Maven 3.6+

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/krnklvx/SemestrWork2_ORIS.git
cd SemestrWork2_ORIS
```

### 2. Сборка проекта

```bash
mvn clean compile
```

### 3. Запуск сервера

В первом терминале:

```bash
mvn exec:java -Dexec.mainClass="ru.game.server.GameServer"
```

### 4. Запуск клиента

Во втором терминале:

```bash
mvn exec:java -Dexec.mainClass="ru.game.Main"
```

## Как играть

1. Запустите сервер (один раз)
2. Запустите двух клиентов
3. В окне подключения введите:
   - **Никнейм** (например, "Игрок1", "Игрок2")
   - **Адрес**: `localhost`
   - **Порт**: `8888`
4. Нажмите "Подключиться"
5. Один игрок получит слово для рисования, второй будет угадывать
6. Рисующий использует мышь для рисования на холсте
7. Угадывающий вводит слово в поле ввода
8. После правильного ответа роли меняются

## Структура проекта

```
SemestrWork2/
├── pom.xml                          # Maven конфигурация
├── README.md                        # Этот файл
├── src/
│   └── main/
│       └── java/
│           └── ru/
│               └── game/
│                   ├── Main.java                    # Точка входа (клиент)
│                   ├── client/
│                   │   ├── ConnectionWindow.java   # Окно подключения
│                   │   ├── GameClient.java         # Клиентская логика
│                   │   └── GameWindow.java         # Игровое окно
│                   ├── server/
│                   │   └── GameServer.java         # Сервер
│                   ├── model/
│                   │   ├── Player.java             # Модель игрока
│                   │   └── GameState.java          # Состояние игры
│                   ├── protocol/
│                   │   └── Protocol.java           # Протокол сообщений
│                   └── storage/
│                       └── GameStorage.java        # Сохранение в JSON
```

## Протокол сообщений

Игра использует текстовый протокол со следующими типами сообщений:

- `JOIN:никнейм` - подключение игрока
- `ROLE:DRAWER/GUESSER` - назначение роли
- `WORD:слово` - отправка слова рисующему (только ему)
- `DRAW:x1,y1,x2,y2,цвет` - координаты рисования
- `GUESS:текст` - попытка угадать
- `CLEAR:` - очистка холста
- `SCORE:игрок1=10,игрок2=5` - обновление счета
- `CHAT:ник:сообщение` - сообщение в чат
- `GAME_START:сообщение` - начало игры
- `CORRECT:никнейм` - правильный ответ
- `ERROR:сообщение` - ошибка

## Особенности реализации

✅ Графический интерфейс на Swing  
✅ Рисование через `Graphics2D` и `BufferedImage`  
✅ Сетевые сокеты для client-server взаимодействия  
✅ Многопоточность (отдельные потоки для каждого клиента)  
✅ Кастомный текстовый протокол (10+ типов сообщений)  
✅ Сохранение статистики в JSON файл  
✅ Масштабирование координат для рисования  
